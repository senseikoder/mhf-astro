---
export const prerender = false;
import HomeLayout from "../../layouts/HomeLayout.astro";
import FormattedDate from "../../components/FormattedDate.astro";

const { page } = Astro.params;

const res = await fetch(
	`https://myhealthfair.com/wp-json/wp/v2/posts?page=${page}&_embed`,
);

const posts = await res.json();
---

<HomeLayout title="Feria de Salud - Blog" description="Blog">
	<section>
		<ul>
			{
				posts.map((post) => (
					<li>
						<a href={`/${post.slug}`}>
							<img
								width={720}
								height={360}
								src={
									post._embedded["wp:featuredmedia"]["0"].media_details
										.sizes.medium_large.source_url
								}
								alt=""
							/>
							<h4 class="title">{post.title.rendered}</h4>
							<p class="date">
								<FormattedDate date={new Date(post.date)} />
							</p>
						</a>
					</li>
				))
			}
		</ul>
	</section>
</HomeLayout>
