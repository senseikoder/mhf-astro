---
export const prerender = false;
import PageLayout from "../../../layouts/PageLayout.astro";
// import FormattedDate from "../../../components/FormattedDate.astro";

let pagina = 1;
const { page } = Astro.params;

if (page) pagina = Number(page);

const res = await fetch(
   `https://myhealthfair.com/wp-json/wp/v2/posts?page=${pagina}&lang=en&_embed`,
);

const posts = await res.json();
---

<PageLayout title="Feria de Salud - Blog" description="Blog">
   <section class="section">
      <div class="container is-max-desktop">
         <div class="columns is-multiline is-variable is-8">
            {
               posts.map((post: any) => (
                  <div class="column is-6">
                     <div class="card">
                        <div class="card-content">
                           <a href={`/en/${post.slug}`}>
                              <img
                                 width={720}
                                 height={360}
                                 src={
                                    post._embedded["wp:featuredmedia"]["0"]
                                       .media_details.sizes.medium_large
                                       .source_url
                                 }
                                 alt=""
                              />
                              <h4 class="title is-5 my-4">
                                 {post.title.rendered}
                              </h4>
                           </a>

                           <small>
                              <Fragment set:html={post.excerpt.rendered} />
                           </small>
                        </div>
                     </div>
                  </div>
               ))
            }
         </div>
      </div>
   </section>
</PageLayout>
