---
const idioma = Astro.currentLocale;
const siteKey = import.meta.env.PUBLIC_TURNSTILE_SITE_KEY;
const mc = {
  email: idioma == "es" ? "Correo electr√≥nico" : "Email address",
  nombre: idioma == "es" ? "Nombre" : "First name",
  boton: idioma == "es" ? "Suscribirse" : "Suscribe",
};
---

<div id="mc_embed_shell">
  <div id="mc_embed_signup">
    <form
      action="https://consultingrw.us19.list-manage.com/subscribe/post?u=501ca8a4caf75496082ea48f1&id=ee8aea865e&f_id=00f3bfe4f0"
      method="post"
      id="mc-embedded-subscribe-form"
      name="mc-embedded-subscribe-form"
      class="validate"
      target="_blank"
    >
      <div id="mc_embed_signup_scroll">
        <!-- <h2>Subscribe</h2> -->
        <!-- <div class="indicates-required"><span class="asterisk">*</span> indicates required</div> -->
        <div class="mc-field-group">
          <label for="mce-EMAIL"
            >{mc.email} <span class="asterisk">*</span></label
          ><input
            type="email"
            name="EMAIL"
            class="required email"
            id="mce-EMAIL"
            required=""
            value=""
          />
        </div><div class="mc-field-group">
          <label for="mce-FNAME"
            >{mc.nombre}<span class="asterisk">*</span></label
          ><input
            type="text"
            name="FNAME"
            class="required text"
            id="mce-FNAME"
            required=""
            value=""
          />
        </div>
        <div id="mce-responses" class="clear foot">
          <div class="response" id="mce-error-response" style="display: none;">
          </div>
          <div
            class="response"
            id="mce-success-response"
            style="display: none;"
          >
          </div>
        </div>
        <div aria-hidden="true" style="position: absolute; left: -5000px;">
          <input
            type="text"
            name="b_501ca8a4caf75496082ea48f1_ee8aea865e"
            tabindex="-1"
            value=""
          />
        </div>
        <div
          class="cf-turnstile"
          data-sitekey={siteKey}
          data-size="flexible"
          data-callback="onTurnstileSuccess"
          data-error-callback="onTurnstileError"
          data-expired-callback="onTurnstileExpired"
        >
        </div>
        <div class="optionalParent">
          <div class="clear foot">
            <input
              type="submit"
              name="subscribe"
              id="mc-embedded-subscribe"
              class="button is-primary"
              value={mc.boton}
              disabled
            />
          </div>
        </div>
      </div>
    </form>
  </div>
  <script
    is:inline
    type="text/javascript"
    src="//s3.amazonaws.com/downloads.mailchimp.com/js/mc-validate.js"
  ></script><script type="text/javascript">
    (function ($) {
      window.fnames = new Array();
      window.ftypes = new Array();
      fnames[0] = "EMAIL";
      ftypes[0] = "email";
      fnames[1] = "FNAME";
      ftypes[1] = "text";
      fnames[2] = "LNAME";
      ftypes[2] = "text";
      fnames[3] = "ADDRESS";
      ftypes[3] = "address";
      fnames[4] = "PHONE";
      ftypes[4] = "phone";
      fnames[5] = "BIRTHDAY";
      ftypes[5] = "birthday";
      fnames[6] = "MMERGE6";
      ftypes[6] = "text";
      fnames[7] = "MMERGE7";
      ftypes[7] = "text";
    })(jQuery);
    var $mcj = jQuery.noConflict(true);
  </script>
  <script
    src="https://challenges.cloudflare.com/turnstile/v0/api.js"
    async
    defer></script>
  <script is:inline>
    function onTurnstileSuccess(token) {
      // console.log("Turnstile success:", token);
      document.getElementById("mc-embedded-subscribe").disabled = false;
    }
    function onTurnstileError(errorCode) {
      // console.error("Turnstile error:", errorCode);
      document.getElementById("mc-embedded-subscribe").disabled = true;
    }
    function onTurnstileExpired() {
      console.warn("Turnstile token expired");
      document.getElementById("mc-embedded-subscribe").disabled = true;
    }
  </script>
</div>

<style type="text/css">
  #mc_embed_signup {
    background: transparent;
    clear: left;
    width: 100%;
  }
  /* Add your own Mailchimp form style overrides in your site stylesheet or in this style block.
       We recommend moving this block and the preceding CSS link to the HEAD of your HTML file. */
  #mc_embed_signup .button {
    background-color: var(--bulma-primary);
    padding: 10px 25px;
    height: auto;
    font-size: 16px;
    line-height: 1.2;
  }

  #mc_embed_signup .mc-field-group label {
    margin: 0;
    font-size: 1rem;
  }

  #mc_embed_signup .mc-field-group {
    padding-bottom: 2%;
  }

  #mc_embed_signup form {
    margin: 1rem;
  }

  #mc_embed_signup input {
    background-color: var(--bulma-white);
    border: 1px solid var(--bulma-grey-lighter);
    border-radius: 4px;
    box-shadow: inset 0 1px 2px rgba(10, 10, 10, 0.1);
    padding: 10px;
    width: 100%;
    margin-bottom: 1rem;
  }

  #mc_embed_signup div.mce_inline_error {
    margin: 0 0 1em 0;
    padding: 5px 10px;
    background-color: #6b0505;
    font-size: 0.8rem;
    font-weight: 400;
    z-index: 1;
    color: #fff;
  }
</style>
